<% @product.errors.full_messages.each do |msg| %>
  <li>
    <%= msg %>
  </li>
<% end %>

<%= form_for( setup_for(@product), :html => { :class => "form-horizontal" } ) do |f| %>

  <div class="row-fluid">
    <div class="span6 offset3 well">

      <legend>Edit product</legend>
      <div class="control-group">
        <%= f.label :category_id, :class => 'control-label' %>
        <div class="controls">
          <input disabled class="input-text span12" type="text" value="<%= @product.category.name %>">
          <%= f.hidden_field :category_id , :value => @product.category.id %>
        </div>
      </div>

      <div class="control-group">
        <%= f.label :name, :class => 'control-label' %>
        <div class="controls">
          <%= f.text_field :name, :class => 'input-text span12' %>
        </div>
      </div>

      <div class="control-group">
        <%= f.label :fixed_number, :class => 'control-label' %>
        <div class="controls">
          <%= f.text_field :fixed_number, :value => @product.category.generate_fixed_number, :class => 'input-text span12' %>
        </div>
      </div>

      <div class="control-group">
        <%= f.label :description, :class => 'control-label' %>
        <div class="controls">
          <%= f.text_area :description, :rows => 5, :class => "span12" %>
        </div>
      </div>

      <legend>Edit variants</legend>

      <%= f.fields_for :variants do |ff| %>

        <div class="control-group">
          <%= ff.label :size, :class => 'control-label' %>
          <div class="controls">
            <%= ff.text_field :size, :class => 'input-text span12' %>
          </div>
        </div>

        <div class="control-group">
          <%= ff.label :price, :class => 'control-label' %>
          <div class="controls">
            <%= ff.text_field :price, :class => 'input-text span12' %>
          </div>
        </div>

        <% if ff.object.persisted? %>
          <div class="control-group">
            <div class="controls">
              <%= ff.label( :_destroy, 'Destroy', :class => 'checkbox' ) do %>
                <%= ff.check_box :_destroy %> Destroy
              <% end %>
            </div>
          </div>
        <% end %>

      <% end %>

      <%= link_to "Cancel", product_path(@product), :class => 'btn' %>
      <%= f.submit "Update & Save", :class => 'btn btn-primary pull-right' %>

    </div>
  </div>

<% end %>
